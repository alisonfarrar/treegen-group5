
<html>
<body>

<canvas id="canvas" width="1000" height="1000"></canvas>

<script src="node_modules/lindenmayer/dist/lindenmayer.browser.js"></script>

<script>

var canvas = document.getElementById('canvas')
var ctx = canvas.getContext("2d")

// translate to center of canvas
ctx.translate(canvas.width / 2, canvas.height / 4)

// now define the parameters for figure 1.24c

var angle = 22.5;
var iterations = 4;

// create some variables which describe the position and orientation of the turtle
var x = 0;
var y = 0;
var orientation = 0;
// variable d describes how the step size decreases
var d = 1;
// create var state so we can call ] before [ 
var state = [0, 0, 0];
// define the tree generation L-system
var tree = new LSystem({
  axiom: 'F',
  productions: {
    'F': 'FF-[-F+F+F]+[+F-F-F]'
  },
  finals: {
    '+': () => { orientation = (Math.PI/180) * angle },
    '-': () => { orientation = (Math.PI/180) * -angle },
    // save the current turtle position and orientation to a list
    '[': () => { state = [x, y, orientation]}, 
    // set the turtle's position and orientiation to most recent values from list
    ']': () => { x = state[0], y = state[1], orientation = state[2]},  
    // pass plotting instructions to the turtle
    'F': () => {

      // create a line
      ctx.beginPath()
      // start it at x,y
      ctx.moveTo(x,y)
      // calculate the new coordinates 
      // decrease factor d:
      d = 5
      // calculate 
      x = x + d * Math.cos(orientation)
      y = y + d * Math.sin(orientation)
      // draw a line to the new point 
      ctx.lineTo(x, y) 
      // plot the line with stroke()
      ctx.stroke()}
   }
});

tree.iterate(iterations)
tree.final()

</script>
</body>
</html>